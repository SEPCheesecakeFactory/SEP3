@hostname = localhost
@port = 5161
@baseURL = http://{{hostname}}:{{port}}

### 1. Login as Admin
POST {{baseURL}}/Auth/login
Content-Type: application/json

{
  "Username": "admin_user",
  "Password": "123"
}



### 2. Get Courses (using the token)
### Get all courses [X]

GET {{baseURL}}/courses/
Accept: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJKV1RTZXJ2aWNlQWNjZXNzVG9rZW4iLCJqdGkiOiJjNDI4MWUwNC03NWE1LTRhZjktOWRjOS01NDBlNDdkNzI2MTgiLCJpYXQiOjE3NjQ1ODM3NjIsInVuaXF1ZV9uYW1lIjoiaGVsbG8iLCJVc2VybmFtZSI6ImhlbGxvIiwiUm9sZSI6ImxlYXJuZXIiLCJuYmYiOjE3NjQ1ODM3NjIsImV4cCI6MTc2NDU4NzM2MiwiaXNzIjoiSldUQXV0aGVudGljYXRpb25TZXJ2ZXIiLCJhdWQiOiJKV1RTZXJ2aWNlQmxhem9yQ2xpZW50In0.mHjCyNCCtSkJvb1LUHjfe2zksVJCXaS0PwI8arFWNCI

### 3. Login as Alice
POST {{baseURL}}/Auth/login
Content-Type: application/json

{
  "Username": "alice_smith",
  "Password": "123"
}
### 4
POST {{baseURL}}/Auth/login
Content-Type: application/json

{
  "Username": "jane_doe",
  "Password": "123"
}
### 1. Login test without dataserver
POST {{baseURL}}/Auth/login
Content-Type: application/json

{
  "Username": "alice",
  "Password": "password1"
}

### Register test user
POST {{baseURL}}/Auth/register
Content-Type: application/json

{
  "Username": "testuser",
  "Password": "testpass",
  "PasswordRepeat": "testpass",
  "Roles": [
    {
      "RoleName": "learner"
    }
  ]
}
### 1. Login test without dataserver
POST {{baseURL}}/Auth/login
Content-Type: application/json

{
  "Username": "testuser",
  "Password": "testpass"
}
### Get Learning Step by double id [X]

GET {{baseURL}}/learningsteps/1_1

### Register test user
POST {{baseURL}}/Auth/register
Content-Type: application/json

{
  "Username": "hello",
  "Password": "itsmeurlookingfor",
  "PasswordRepeat": "itsmeurlookingfor",
  "Roles": [
    {
      "RoleName": "teacher"
    }
  ]
}


### Test edit learning step
PUT {{baseURL}}/learningsteps/1_1
Content-Type: application/json

{
  "courseId": 1,
  "stepOrder": 1,
  "type": "Text",
  "content": "Introduction to the Roman Empire. v123"  
}

### Add Draft
POST {{baseURL}}/drafts
Content-Type: application/json

{
  "Language": "C#",
  "Title": "Advanced C#",
  "Description": "Deep dive into C#",
  "TeacherId": 1
}
### Get Draft by ID
GET {{baseURL}}/drafts/4
Accept: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJKV1RTZXJ2aWNlQWNjZXNzVG9rZW4iLCJqdGkiOiI5MGRiZDFmNi02MDE3LTRhNTktOTRjMS02M2QxODdjNjJmZWMiLCJpYXQiOjE3NjQ2ODgxNDQsInVuaXF1ZV9uYW1lIjoiaGVsbG8iLCJVc2VybmFtZSI6ImhlbGxvIiwiUm9sZSI6InRlYWNoZXIiLCJuYmYiOjE3NjQ2ODgxNDQsImV4cCI6MTc2NDY5MTc0NCwiaXNzIjoiSldUQXV0aGVudGljYXRpb25TZXJ2ZXIiLCJhdWQiOiJKV1RTZXJ2aWNlQmxhem9yQ2xpZW50In0.nf5A1eW1GSg6dK8co4JctpK88FCfVYRbIZJ91vcthuU

### Add Draft
POST {{baseURL}}/drafts
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJKV1RTZXJ2aWNlQWNjZXNzVG9rZW4iLCJqdGkiOiJhMDU0NDFjMi0yNmE4LTRhODgtOTJmMC05NGM4MTZiY2RhNDUiLCJpYXQiOjE3NjQ3NzEyNDQsInVuaXF1ZV9uYW1lIjoidGVhY2hlcnIiLCJVc2VybmFtZSI6InRlYWNoZXJyIiwiSWQiOiIwIiwiUm9sZSI6InRlYWNoZXIiLCJuYmYiOjE3NjQ3NzEyNDQsImV4cCI6MTc2NDc3NDg0NCwiaXNzIjoiSldUQXV0aGVudGljYXRpb25TZXJ2ZXIiLCJhdWQiOiJKV1RTZXJ2aWNlQmxhem9yQ2xpZW50In0.77wgnCS-8q0T1TtVOTpHsplucIztyhKulzgGTPwjiKQ
Content-Type: application/json

{
  "Language": "ENG",
  "Title": "Advanced C#",
  "Description": "Deep dive into C#",
  "TeacherId": 2
}




### 1. Login test without dataserver
POST {{baseURL}}/Auth/login
Content-Type: application/json

{
  "Username": "hello",
  "Password": "itsmeurlookingfor"
}
### Register Admin
POST {{baseURL}}/Auth/register
Content-Type: application/json

{
  "Username": "admin",
  "Password": "123",
  "PasswordRepeat": "123",
  "Roles": [
    {
      "RoleName": "admin"
    }
  ]
}
### Register teacherr
POST {{baseURL}}/Auth/register
Content-Type: application/json

{
  "Username": "teacher",
  "Password": "123",
  "PasswordRepeat": "123",
  "Roles": [
    {
      "RoleName": "teacher"
    }
  ]
}
### 1. Login as teacher
POST {{baseURL}}/Auth/login
Content-Type: application/json

{
  "Username": "admin",
  "Password": "123"
}

### Approve Draft (Admin)
PUT {{baseURL}}/drafts/2
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJKV1RTZXJ2aWNlQWNjZXNzVG9rZW4iLCJqdGkiOiIwYzBjOWQ4My0wMzc3LTQ4MGQtOGU2ZS01Mzk1MzQ5NmYxZjciLCJpYXQiOjE3NjQ3NzEyODksInVuaXF1ZV9uYW1lIjoiYWRtaW4iLCJVc2VybmFtZSI6ImFkbWluIiwiSWQiOiIyIiwiUm9sZSI6ImFkbWluIiwibmJmIjoxNzY0NzcxMjg5LCJleHAiOjE3NjQ3NzQ4ODksImlzcyI6IkpXVEF1dGhlbnRpY2F0aW9uU2VydmVyIiwiYXVkIjoiSldUU2VydmljZUJsYXpvckNsaWVudCJ9.vO3xloDvxDwYhtX-nbSe-JNIfJ7LTDvhxqTL6aprWjM
Content-Type: application/json

1
### Test course progress

### If your testuser has an ID different than 1 make sure to replace with the 1
### 1. Login to get a valid Token and confirm User ID
POST {{baseURL}}/Auth/login
Content-Type: application/json

{
  "Username": "testuser",
  "Password": "testpass"
}

### 2. Get Current Progress
# Check what step User 1 is on for Course 1.
# If you haven't started, it should return 1.
GET {{baseURL}}/CourseProgress/1/1
Accept: application/json

### 3. Update Progress (Simulate finishing Step 1)
# "User 1 is now on Step 2 of Course 1"
POST {{baseURL}}/CourseProgress
Content-Type: application/json

{
  "userId": 1,
  "courseId": 1,
  "currentStep": 2
}

### 4. Verify the Update
# Call GET again to make sure it saved.
# Expected result: 2
GET {{baseURL}}/CourseProgress/1/1
Accept: application/json

### 5. Simulate Course Completion
# If Course 1 has 5 steps, saving "6" means it is completed.
POST {{baseURL}}/CourseProgress
Content-Type: application/json

{
  "userId": 1,
  "courseId": 1,
  "currentStep": 6
}

### 6. Verify Completion
# Expected result: 6
GET {{baseURL}}/CourseProgress/1/1
Accept: application/json

### 7. [Extra] Reset Progress to Step 1
POST {{baseURL}}/CourseProgress
Content-Type: application/json

{
  "userId": 1,
  "courseId": 1,
  "currentStep": 1
}

###############################################
### EDIT COURSE TESTS
###############################################

### 8. Login as Teacher/Admin first to get token
POST {{baseURL}}/Auth/login
Content-Type: application/json

{
  "Username": "teacher",
  "Password": "123"
}

### 9. Update Course (PUT /courses/{id})
### IMPORTANT: First run "Get Courses" to see existing course IDs, categories, and languages
### Then use values that exist in your database
PUT {{baseURL}}/courses/1
Content-Type: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJKV1RTZXJ2aWNlQWNjZXNzVG9rZW4iLCJqdGkiOiI4NTg0YTAxMi0xZTg2LTQ0ZTQtOWJmNy0xYTJmMWE4MmY5NzMiLCJpYXQiOjE3NjQ4ODA0MDksInVuaXF1ZV9uYW1lIjoiaGVsbG8iLCJVc2VybmFtZSI6ImhlbGxvIiwiSWQiOiIyIiwiaWQiOiIyIiwiUm9sZSI6InRlYWNoZXIiLCJuYmYiOjE3NjQ4ODA0MDksImV4cCI6MTc2NDg4NDAwOSwiaXNzIjoiSldUQXV0aGVudGljYXRpb25TZXJ2ZXIiLCJhdWQiOiJKV1RTZXJ2aWNlQmxhem9yQ2xpZW50In0.4ESfJHB6fe9Lmj36oWEunMfcLu-_saT9EW41KEuus4M

{
  "id": 1,
  "title": "Updated Course Title",
  "description": "This is the updated description",
  "category": "History",
  "language": "ENG"
}

### 10. Verify Course Update
GET {{baseURL}}/courses/
Accept: application/json
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJKV1RTZXJ2aWNlQWNjZXNzVG9rZW4iLCJqdGkiOiIzMGQxMTg2Mi03MjhhLTRhMmUtODczMy1mMTI0ZDVjYTUxNDEiLCJpYXQiOjE3NjQ4Njk3MTMsInVuaXF1ZV9uYW1lIjoidGVhY2hlciIsIlVzZXJuYW1lIjoidGVhY2hlciIsIklkIjoiMiIsImlkIjoiMiIsIlJvbGUiOiJ0ZWFjaGVyIiwibmJmIjoxNzY0ODY5NzEzLCJleHAiOjE3NjQ4NzMzMTMsImlzcyI6IkpXVEF1dGhlbnRpY2F0aW9uU2VydmVyIiwiYXVkIjoiSldUU2VydmljZUJsYXpvckNsaWVudCJ9.ApAkX7NC48u7goOcAUpjeAQecHXvEeBIzigWdJt8Rho
